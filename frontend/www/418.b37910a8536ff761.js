"use strict";(self.webpackChunkfisheye=self.webpackChunkfisheye||[]).push([[418],{7418:(Xt,R,c)=>{c.r(R),c.d(R,{ComparisonModule:()=>bt});var G=c(177),nt=c(668),m=c(9417),r=c(8244),p=c(6974),j=c(3678),Y=c(8359),O=c(9172),w=c(6354),it=c(7468),t=c(7705),st=c(7606);let at=(()=>{class o{constructor(){this.center=(0,r.latLng)(18,0),this.zoom=2.5,this.bl=[0,0],this.tr=[0,0],this.init1=!1,this.init2=!1,this.init3=!1,this.init4=!1,this.sub=new Y.yU}setCenter(e){this.center=e}getCenter(){return this.center}setZoom(e){this.zoom=e}getZoom(){return this.zoom}setMap(e,i){0==i?this.navigation=e:1==i?this.map1=e:2==i?this.map2=e:3==i?this.map3=e:4==i&&(this.map4=e)}getMap(e){return 0==e?this.navigation:1==e?this.map1:2==e?this.map2:3==e?this.map3:4==e?this.map4:void 0}setCanvas(e,i){1==i?this.canvas1=e:2==i?this.canvas2=e:3==i?this.canvas3=e:4==i&&(this.canvas4=e)}getCanvas(e){return 1==e?this.canvas1:2==e?this.canvas2:3==e?this.canvas3:4==e?this.canvas4:void 0}setContext(e,i){1==i?this.context1=e:2==i?this.context2=e:3==i?this.context3=e:4==i&&(this.context4=e)}getContext(e){return 1==e?this.context1:2==e?this.context2:3==e?this.context3:4==e?this.context4:void 0}setData(e,i){1==i?this.data1=e:2==i?this.data2=e:3==i?this.data3=e:4==i&&(this.data4=e)}getData(e){return 1==e?this.data1:2==e?this.data2:3==e?this.data3:4==e?this.data4:void 0}setLoaded(e,i){i?1==e?this.init1=!0:2==e?this.init2=!0:3==e?this.init3=!0:4==e&&(this.init4=!0):i||(1==e?this.init1=!1:2==e?this.init2=!1:3==e?this.init3=!1:4==e&&(this.init4=!1))}getLoaded(e){return 1==e?this.init1:2==e?this.init2:3==e?this.init3:4==e?this.init4:void 0}setRenderer(e,i){1==i?this.renderer1=e:2==i?this.renderer2=e:3==i?this.renderer3=e:4==i&&(this.renderer4=e)}getRenderer(e){return 1==e?this.renderer1:2==e?this.renderer2:3==e?this.renderer3:4==e?this.renderer4:void 0}setMax(e,i){1==i?this.max1=e:2==i?this.max2=e:3==i?this.max3=e:4==i&&(this.max4=e)}getMax(e){return 1==e?this.max1:2==e?this.max2:3==e?this.max3:4==e?this.max4:void 0}setBlTr(e,i){this.bl=e,this.tr=i}getBl(){return this.bl}getTr(){return this.tr}setSub(e){this.sub=e}getSub(){return this.sub}getJson(e){return 1==e?this.geoJson1:2==e?this.geoJson2:3==e?this.geoJson3:4==e?this.geoJson4:void 0}setJson(e,i){1==i?this.geoJson1=e:2==i?this.geoJson2=e:3==i?this.geoJson3=e:4==i&&(this.geoJson4=e)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var A=c(5596),D=c(882),L=c(5084),$=c(8834),z=c(1997),I=c(4518),B=c(6600),N=c(9631),J=c(7575),X=c(2798),Z=c(2765);function ot(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid start date"),t.k0s())}function rt(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid end date"),t.k0s())}function lt(o,y){if(1&o&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&o){const e=y.$implicit;t.Y8G("value",e.viewValue),t.R7$(1),t.SpI(" ",e.viewValue," ")}}function ht(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid start date"),t.k0s())}function ct(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid end date"),t.k0s())}function pt(o,y){if(1&o&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&o){const e=y.$implicit;t.Y8G("value",e.viewValue),t.R7$(1),t.SpI(" ",e.viewValue," ")}}function gt(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid start date"),t.k0s())}function mt(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid end date"),t.k0s())}function dt(o,y){if(1&o&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&o){const e=y.$implicit;t.Y8G("value",e.viewValue),t.R7$(1),t.SpI(" ",e.viewValue," ")}}function ft(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid start date"),t.k0s())}function ut(o,y){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid end date"),t.k0s())}function yt(o,y){if(1&o&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&o){const e=y.$implicit;t.Y8G("value",e.viewValue),t.R7$(1),t.SpI(" ",e.viewValue," ")}}let vt=(()=>{class o{constructor(e,i){this.ds=e,this.cs=i,this.bl=[0,0],this.tr=[10,10],this.totalFishingMax=5486.0071,this.min_color="orange",this.max_color="purple",this.faoURL="https://www.fao.org/fishery/geoserver/fifao/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=fifao%3AFAO_AREAS_ERASE_LOWRES&maxFeatures=50&outputFormat=application%2Fjson",this.subs=new Y.yU,this.mapsScale="log",this.minDate=new Date("2017-01-01"),this.maxDate=new Date("2020-12-31"),this.faoChecked=!1,this.faoDisabled=!0,this.range1=new m.J3({start:new m.hs,end:new m.hs}),this.range2=new m.J3({start:new m.hs,end:new m.hs}),this.range3=new m.J3({start:new m.hs,end:new m.hs}),this.range4=new m.J3({start:new m.hs,end:new m.hs}),this.countryControl1=new m.hs,this.options1=j,this.countryControl2=new m.hs,this.options2=j,this.countryControl3=new m.hs,this.options3=j,this.countryControl4=new m.hs,this.options4=j}ngOnInit(){this.showProgress1(),this.showProgress2(),this.showProgress3(),this.showProgress4(),this.filteredOptions1=this.countryControl1.valueChanges.pipe((0,O.Z)(""),(0,w.T)(s=>"string"==typeof s?s:s.name),(0,w.T)(s=>s?this._filter(s):this.options1.slice())),this.filteredOptions2=this.countryControl2.valueChanges.pipe((0,O.Z)(""),(0,w.T)(s=>"string"==typeof s?s:s.name),(0,w.T)(s=>s?this._filter(s):this.options1.slice())),this.filteredOptions3=this.countryControl3.valueChanges.pipe((0,O.Z)(""),(0,w.T)(s=>"string"==typeof s?s:s.name),(0,w.T)(s=>s?this._filter(s):this.options1.slice())),this.filteredOptions4=this.countryControl4.valueChanges.pipe((0,O.Z)(""),(0,w.T)(s=>"string"==typeof s?s:s.name),(0,w.T)(s=>s?this._filter(s):this.options1.slice())),this.navigation=r.map("navigation").setView([18,0],2.5),r.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:2,maxZoom:10,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.navigation);const i={dragging:!1,zoomControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,attributionControl:!1};this.map1=r.map("map1",i).setView([18,0],2.5),this.map2=r.map("map2",i).setView([18,0],2.5),this.map3=r.map("map3",i).setView([18,0],2.5),this.map4=r.map("map4",i).setView([18,0],2.5),this.cs.setMap(this.map1,1),this.cs.setMap(this.map2,2),this.cs.setMap(this.map3,3),this.cs.setMap(this.map4,4),this.initMap(1),this.initMap(2),this.initMap(3),this.initMap(4),p.Pq9(this.faoURL).then(s=>{this.faoDisabled=!1,this.cs.setJson(s,1)});const n=this.map1.getBounds();this.bl[0]=n.getSouth(),this.bl[1]=n.getWest(),this.tr[0]=n.getNorth(),this.tr[1]=n.getEast(),this.range1.setValue({start:"2017-01-01",end:"2017-01-31"}),this.range2.setValue({start:"2018-01-01",end:"2018-01-31"}),this.range3.setValue({start:"2019-01-01",end:"2019-01-31"}),this.range4.setValue({start:"2020-01-01",end:"2020-01-31"}),this.getData(this.bl,this.tr),this.tooltip1=p.Ltv("#tooltip1").attr("class","leaflet-interactive").style("visibility","hidden").style("position","absolute").style("opacity",.7).style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("z-index",9999),this.tooltip2=p.Ltv("#tooltip2").attr("class","leaflet-interactive").style("visibility","hidden").style("position","absolute").style("opacity",.7).style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("z-index",9999),this.tooltip3=p.Ltv("#tooltip3").attr("class","leaflet-interactive").style("visibility","hidden").style("position","absolute").style("opacity",.7).style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("z-index",9999),this.tooltip4=p.Ltv("#tooltip4").attr("class","leaflet-interactive").style("visibility","hidden").style("position","absolute").style("opacity",.7).style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("z-index",9999),this.legend=p.Ltv("#clegend").attr("height",360).attr("width",70),this.navigation.on("moveend zoomend",()=>{let s=r.latLng(0,0),l=r.latLng(0,0);const g=this.navigation.getBounds(),h=this.navigation.getPixelBounds(),u=r.point(h.getBottomLeft().x,h.getBottomLeft().y-217),C=r.point(h.getTopRight().x,h.getTopRight().y+217);s=this.navigation.unproject(u),l=this.navigation.unproject(C),s.lng=this.truncate(g.getWest()),l.lng=this.truncate(g.getEast()),s.lat=this.truncate(s.lat),l.lat=this.truncate(l.lat),this.cs.setBlTr([s.lat,s.lng],[l.lat,l.lng]),this.cs.setCenter(this.navigation.getCenter()),this.cs.setZoom(this.navigation.getZoom())})}truncate(e){return e<0?e=Math.ceil(10*(e-.1))/10:e>=0&&(e=Math.floor(10*e)/10),e}_filter(e){const i=e.toLowerCase();return this.options1.filter(n=>n.viewValue.toLowerCase().includes(i))}clickUpdate(){this.showProgress1(),this.showProgress2(),this.showProgress3(),this.showProgress4(),this.map1=this.cs.getMap(1),this.map2=this.cs.getMap(2),this.map3=this.cs.getMap(3),this.map4=this.cs.getMap(4);const e=this.cs.getZoom(),i=this.cs.getCenter();this.map1.setView(i,e,{animate:!1}),this.map2.setView(i,e,{animate:!1}),this.map3.setView(i,e,{animate:!1}),this.map4.setView(i,e,{animate:!1}),this.bl=this.cs.getBl(),this.tr=this.cs.getTr(),this.getData(this.bl,this.tr)}initMap(e){const i=this.cs.getMap(e);r.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{}).addTo(i),r.canvas().addTo(i),r.svg().addTo(i);const n=p.Ltv(i.getPanes().overlayPane).select("canvas"),s=n.node().getContext("2d");this.cs.setCanvas(n,e),this.cs.setContext(s,e)}getData(e,i){const n=this;this.map1=this.cs.getMap(1),this.map2=this.cs.getMap(2),this.map3=this.cs.getMap(3),this.map4=this.cs.getMap(4);const s=this.cs.getContext(1),l=this.cs.getContext(2),g=this.cs.getContext(3),h=this.cs.getContext(4),u=this.cs.getCanvas(1),C=this.cs.getCanvas(2),k=this.cs.getCanvas(3),x=this.cs.getCanvas(4),P=this.countryControl1.value,b=this.countryControl2.value,V=this.countryControl3.value,Ft=this.countryControl4.value,Mt=new Date(Date.parse(this.range1.value.start)),kt=new Date(Date.parse(this.range2.value.start)),xt=new Date(Date.parse(this.range3.value.start)),wt=new Date(Date.parse(this.range4.value.start)),St=new Date(Date.parse(this.range1.value.end)),Et=new Date(Date.parse(this.range2.value.end)),Lt=new Date(Date.parse(this.range3.value.end)),Pt=new Date(Date.parse(this.range4.value.end)),Dt=this.ds.getLcV(this.dateToStr(Mt),this.dateToStr(St),e,i,P),Tt=this.ds.getLcV(this.dateToStr(kt),this.dateToStr(Et),e,i,b),Gt=this.ds.getLcV(this.dateToStr(xt),this.dateToStr(Lt),e,i,V),jt=this.ds.getLcV(this.dateToStr(wt),this.dateToStr(Pt),e,i,Ft);let U,W,H,_,S;"log"==n.mapsScale?S=p.aX1():"sqrt"==n.mapsScale?S=p.Bv9():"linear"==n.mapsScale&&(S=p.m4Y());const Ot=(0,it.p)([Dt,Tt,Gt,jt]).subscribe(F=>{this.cs.setData(F[0],1),this.cs.setData(F[1],2),this.cs.setData(F[2],3),this.cs.setData(F[3],4),this.legend.selectAll("rect").empty()||this.legend.selectAll("rect").remove(),this.legend.selectAll("g").empty()||this.legend.selectAll("g").remove(),this.legend.selectAll("text").empty()||this.legend.selectAll("text").remove(),this.legend.selectAll("defs").empty()||this.legend.selectAll("defs").remove(),K(),q(),tt(),et(),this.hideProgress1(),this.hideProgress2(),this.hideProgress3(),this.hideProgress4(),console.log(F);const Vt=new renderQueue(function zt(a){const d=n.map1.latLngToLayerPoint(r.latLng(a.lat,a.lon)).x,v=n.map1.latLngToLayerPoint(r.latLng(a.lat,a.lon)).y+.1;s.beginPath(),s.fillStyle=S(a.tfh),s.rect(d,v,n.detSize(a,n.map1)[0],n.detSize(a,n.map1)[1]),s.fill(),s.closePath()}).clear(K),It=new renderQueue(function Bt(a){const d=n.map2.latLngToLayerPoint(r.latLng(a.lat,a.lon)).x,v=n.map2.latLngToLayerPoint(r.latLng(a.lat,a.lon)).y+.1;l.beginPath(),l.fillStyle=S(a.tfh),l.rect(d,v,n.detSize(a,n.map2)[0],n.detSize(a,n.map2)[1]),l.fill(),l.closePath()}).clear(q),Rt=new renderQueue(function Nt(a){const d=n.map3.latLngToLayerPoint(r.latLng(a.lat,a.lon)).x,v=n.map3.latLngToLayerPoint(r.latLng(a.lat,a.lon)).y+.1;g.beginPath(),g.fillStyle=S(a.tfh),g.rect(d,v,n.detSize(a,n.map3)[0],n.detSize(a,n.map3)[1]),g.fill(),g.closePath()}).clear(tt),Yt=new renderQueue(function Jt(a){const d=n.map4.latLngToLayerPoint(r.latLng(a.lat,a.lon)).x,v=n.map4.latLngToLayerPoint(r.latLng(a.lat,a.lon)).y+.1;h.beginPath(),h.fillStyle=S(a.tfh),h.rect(d,v,n.detSize(a,n.map4)[0],n.detSize(a,n.map4)[1]),h.fill(),h.closePath()}).clear(et);let T;U=p.T9B(F[0],a=>+a.tfh)??0,W=p.T9B(F[1],a=>+a.tfh)??0,H=p.T9B(F[2],a=>+a.tfh)??0,_=p.T9B(F[3],a=>+a.tfh)??0,this.totalFishingMax=p.T9B([U,W,H,_],a=>+a)??0,S.domain([0,this.totalFishingMax]).range(["orange","purple"]),Vt(F[0]),It(F[1]),Rt(F[2]),Yt(F[3]),"log"==this.mapsScale?T=p.aX1():"sqrt"==this.mapsScale?T=p.Bv9():"linear"==this.mapsScale&&(T=p.m4Y()),T.domain([0,this.totalFishingMax]).range([0,350]);const $t=p.V4s(T).ticks(5);function K(){s.clearRect(0,0,u.attr("width"),u.attr("height"))}function q(){l.clearRect(0,0,C.attr("width"),C.attr("height"))}function tt(){g.clearRect(0,0,k.attr("width"),k.attr("height"))}function et(){h.clearRect(0,0,x.attr("width"),x.attr("height"))}this.legend.append("defs").append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%").selectAll("stop").data([{offset:"0%",color:this.min_color},{offset:"100%",color:this.max_color}]).join("stop").attr("offset",a=>a.offset).attr("stop-color",a=>a.color),this.legend.append("rect").attr("x",50).attr("y",5).attr("width",15).attr("height",350).style("fill","url(#gradient)"),this.legend.append("g").attr("class","x axis").attr("transform","translate(50, 5)").call($t),this.legend.append("text").attr("x",5).attr("y",-10).attr("transform","rotate(90)").text("Apparent Fishing Activity in Hours"),this.map1=this.cs.getMap(1),this.map2=this.cs.getMap(2),this.map3=this.cs.getMap(3),this.map4=this.cs.getMap(4),this.map1.on("click",function(a){const d=n.cs.getData(1),v=n.truncate(Math.round(100*(a.latlng.lat+.1))/100),E=n.truncate(a.latlng.lng);if(void 0!==d){const f=d.find(M=>M.lat==v&&M.lon==E);void 0!==f?n.tooltip1.style("position","absolute").style("z-index",9999).style("visibility","visible").style("left",a.originalEvent.pageX+20+"px").style("top",a.originalEvent.pageY+20+"px").html("Latitude: "+f.lat+"<br>Longitude: "+f.lon+"<br>Fishing Hours: "+Math.round(100*f.tfh)/100):n.tooltip1.style("visibility","hidden")}}),this.map2.on("click",function(a){const d=n.cs.getData(2),v=n.truncate(Math.round(100*(a.latlng.lat+.1))/100),E=n.truncate(a.latlng.lng);if(void 0!==d){const f=d.find(M=>M.lat==v&&M.lon==E);void 0!==f?n.tooltip2.style("position","absolute").style("z-index",9999).style("visibility","visible").style("left",a.originalEvent.pageX+20+"px").style("top",a.originalEvent.pageY+20+"px").html("Latitude: "+f.lat+"<br>Longitude: "+f.lon+"<br>Fishing Hours: "+Math.round(100*f.tfh)/100):n.tooltip2.style("visibility","hidden")}}),this.map3.on("click",function(a){const d=n.cs.getData(3),v=n.truncate(Math.round(100*(a.latlng.lat+.1))/100),E=n.truncate(a.latlng.lng);if(void 0!==d){const f=d.find(M=>M.lat==v&&M.lon==E);void 0!==f?n.tooltip3.style("position","absolute").style("z-index",9999).style("visibility","visible").style("left",a.originalEvent.pageX+20+"px").style("top",a.originalEvent.pageY+20+"px").html("Latitude: "+f.lat+"<br>Longitude: "+f.lon+"<br>Fishing Hours: "+Math.round(100*f.tfh)/100):n.tooltip3.style("visibility","hidden")}}),this.map4.on("click",function(a){const d=n.cs.getData(4),v=n.truncate(Math.round(100*(a.latlng.lat+.1))/100),E=n.truncate(a.latlng.lng);if(void 0!==d){const f=d.find(M=>M.lat==v&&M.lon==E);void 0!==f?n.tooltip4.style("position","absolute").style("z-index",9999).style("visibility","visible").style("left",a.originalEvent.pageX+20+"px").style("top",a.originalEvent.pageY+20+"px").html("Latitude: "+f.lat+"<br>Longitude: "+f.lon+"<br>Fishing Hours: "+Math.round(100*f.tfh)/100):n.tooltip4.style("visibility","hidden")}})});this.subs.add(Ot),this.cs.setSub(this.subs)}detSize(e,i){const n=parseFloat(e.lat),s=parseFloat(e.lon),l=i.getZoom();let g,h;2==l?(g=r.latLng(n-.01,s),h=r.latLng(n+.1,s+.1)):3==l?(g=r.latLng(n-.03,s),h=r.latLng(n+.1,s+.1)):4==l?(g=r.latLng(n-.025,s),h=r.latLng(n+.1,s+.1)):5==l?(g=r.latLng(n-.017,s),h=r.latLng(n+.1,s+.1)):6==l?(g=r.latLng(n-.005,s),h=r.latLng(n+.1,s+.1)):7==l?(g=r.latLng(n-.002,s),h=r.latLng(n+.1,s+.1)):(g=r.latLng(n,s),h=r.latLng(n+.1,s+.1));let u=Math.abs(i.latLngToLayerPoint(g).x-i.latLngToLayerPoint(h).x),C=Math.abs(i.latLngToLayerPoint(g).y-i.latLngToLayerPoint(h).y);return u=u<1?1:u,C=C<1?1:C,[u,C]}dateToStr(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}faoChange(e){const i=this;this.map1=this.cs.getMap(1),this.map2=this.cs.getMap(2),this.map3=this.cs.getMap(3),this.map4=this.cs.getMap(4);const n=this.cs.getJson(1),s=p.wug({point:function(g,h){const u=i.map1.latLngToLayerPoint([h,g]);this.stream.point(u.x,u.y)}}),l=p.zFW().projection(s);if(this.faoChecked){let x=function(b,V){k.html("FAO Boundary: "+V.properties.NAME_EN+"<br>Ocean: "+V.properties.OCEAN).style("visibility","visible").style("left",b.pageX+5+"px").style("top",b.pageY+5+"px")},P=function(b){k.style("visibility","hidden")};this.faoSVG1=p.Ltv(this.map1.getPanes().overlayPane).select("svg"),this.faoSVG2=p.Ltv(this.map2.getPanes().overlayPane).select("svg"),this.faoSVG3=p.Ltv(this.map3.getPanes().overlayPane).select("svg"),this.faoSVG4=p.Ltv(this.map4.getPanes().overlayPane).select("svg");const g=this.faoSVG1.append("g").selectAll("path").data(n.features).enter().append("path").attr("d",b=>l(b.geometry)).attr("class","leaflet-interactive").attr("pointer-events","painted").style("fill","lightgrey").style("fill-opacity",0).attr("stroke","black").attr("stroke-opacity",.2),h=this.faoSVG2.append("g").selectAll("path").data(n.features).enter().append("path").attr("d",b=>l(b.geometry)).attr("class","leaflet-interactive").attr("pointer-events","painted").style("fill","lightgrey").style("fill-opacity",0).attr("stroke","black").attr("stroke-opacity",.2),u=this.faoSVG3.append("g").selectAll("path").data(n.features).enter().append("path").attr("d",b=>l(b.geometry)).attr("class","leaflet-interactive").attr("pointer-events","painted").style("fill","lightgrey").style("fill-opacity",0).attr("stroke","black").attr("stroke-opacity",.2),C=this.faoSVG4.append("g").selectAll("path").data(n.features).enter().append("path").attr("d",b=>l(b.geometry)).attr("class","leaflet-interactive").attr("pointer-events","painted").style("fill","lightgrey").style("fill-opacity",0).attr("stroke","black").attr("stroke-opacity",.2),k=p.Ltv("#tooltipFAO").attr("class","leaflet-interactive").style("visibility","hidden").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","1px").style("border-radius","5px").style("padding","10px").style("opacity",.7).style("z-index",1e4);g.on("pointermove",x).on("pointerout",P),h.on("pointermove",x).on("pointerout",P),u.on("pointermove",x).on("pointerout",P),C.on("pointermove",x).on("pointerout",P)}else this.faoChecked||(this.faoSVG1.selectAll("g").empty()||this.faoSVG1.selectAll("g").remove(),this.faoSVG2.selectAll("g").empty()||this.faoSVG2.selectAll("g").remove(),this.faoSVG3.selectAll("g").empty()||this.faoSVG3.selectAll("g").remove(),this.faoSVG4.selectAll("g").empty()||this.faoSVG4.selectAll("g").remove())}showProgress1(){let e=document.getElementById("progress1");null!=e&&(e.style.visibility="visible")}showProgress2(){let e=document.getElementById("progress2");null!=e&&(e.style.visibility="visible")}showProgress3(){let e=document.getElementById("progress3");null!=e&&(e.style.visibility="visible")}showProgress4(){let e=document.getElementById("progress4");null!=e&&(e.style.visibility="visible")}hideProgress1(){let e=document.getElementById("progress1");null!=e&&(e.style.visibility="hidden")}hideProgress2(){let e=document.getElementById("progress2");null!=e&&(e.style.visibility="hidden")}hideProgress3(){let e=document.getElementById("progress3");null!=e&&(e.style.visibility="hidden")}hideProgress4(){let e=document.getElementById("progress4");null!=e&&(e.style.visibility="hidden")}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(st.W),t.rXU(at))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-comparison"]],decls:142,vars:51,consts:[["id","tooltip1",1,"tooltip"],["id","tooltip2",1,"tooltip"],["id","tooltip3",1,"tooltip"],["id","tooltip4",1,"tooltip"],["id","tooltipFAO"],["id","con",1,"container"],["id","legendCard"],["id","clegend"],[1,"map-container-left"],[1,"map-container-top"],["id","map1"],["color","accent","mode","indeterminate","id","progress1",1,"progress"],[1,"map-container-bottom"],["id","map3"],["color","accent","mode","indeterminate","id","progress2",1,"progress"],[1,"map-container-right"],["id","map2"],["color","accent","mode","indeterminate","id","progress3",1,"progress"],["id","map4"],["color","accent","mode","indeterminate","id","progress4",1,"progress"],[1,"navigation-container"],["id","navigation"],["id","compBorder"],[1,"filter"],["id","filter"],[1,"maps-container"],["appearance","fill",2,"margin-bottom","-1em"],[3,"formGroup","min","max","rangePicker"],["matStartDate","","formControlName","start","placeholder","2020-01-01"],["matEndDate","","formControlName","end","placeholder","2020-01-05"],["matSuffix","",3,"for"],["picker1",""],[4,"ngIf"],["appearance","fill"],["type","text","matInput","","placeholder","World",3,"formControl","matAutocomplete"],["auto1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["picker2",""],["auto2","matAutocomplete"],["picker3",""],["auto3","matAutocomplete"],["picker4",""],["auto4","matAutocomplete"],[1,"button-container"],[1,"worldChecked",3,"ngModel","disabled","ngModelChange","change"],[3,"value","valueChange"],["value","linear"],["value","sqrt"],["value","log"],["mat-raised-button","","id","updateButton",3,"click"],[3,"value"]],template:function(i,n){if(1&i&&(t.nrm(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.j41(5,"div",5)(6,"mat-card",6),t.qSk(),t.nrm(7,"svg",7),t.k0s(),t.joV(),t.j41(8,"div",8)(9,"div",9)(10,"p"),t.EFF(11,"Map 1"),t.k0s(),t.nrm(12,"div",10)(13,"mat-progress-bar",11),t.k0s(),t.j41(14,"div",12)(15,"p"),t.EFF(16,"Map 3"),t.k0s(),t.nrm(17,"div",13)(18,"mat-progress-bar",14),t.k0s()(),t.j41(19,"div",15)(20,"div",9)(21,"p"),t.EFF(22,"Map 2"),t.k0s(),t.nrm(23,"div",16)(24,"mat-progress-bar",17),t.k0s(),t.j41(25,"div",12)(26,"p"),t.EFF(27,"Map 4"),t.k0s(),t.nrm(28,"div",18)(29,"mat-progress-bar",19),t.k0s()(),t.j41(30,"div",20)(31,"div",21),t.qSk(),t.nrm(32,"svg",22),t.k0s()(),t.joV(),t.j41(33,"div",23)(34,"mat-card",24)(35,"div",25)(36,"h3"),t.EFF(37,"Map 1:"),t.k0s(),t.j41(38,"mat-form-field",26)(39,"mat-label"),t.EFF(40,"Enter a date range for map 1"),t.k0s(),t.j41(41,"mat-date-range-input",27),t.nrm(42,"input",28)(43,"input",29),t.k0s(),t.nrm(44,"mat-datepicker-toggle",30)(45,"mat-date-range-picker",null,31),t.DNE(47,ot,2,0,"mat-error",32),t.DNE(48,rt,2,0,"mat-error",32),t.k0s(),t.j41(49,"mat-form-field",33)(50,"mat-label"),t.EFF(51,"Select Country"),t.k0s(),t.nrm(52,"input",34),t.j41(53,"mat-autocomplete",null,35),t.DNE(55,lt,2,2,"mat-option",36),t.nI1(56,"async"),t.k0s()(),t.nrm(57,"mat-divider"),t.k0s(),t.j41(58,"div",25)(59,"h3"),t.EFF(60,"Map 2:"),t.k0s(),t.j41(61,"mat-form-field",26)(62,"mat-label"),t.EFF(63,"Enter a date range for map 2"),t.k0s(),t.j41(64,"mat-date-range-input",27),t.nrm(65,"input",28)(66,"input",29),t.k0s(),t.nrm(67,"mat-datepicker-toggle",30)(68,"mat-date-range-picker",null,37),t.DNE(70,ht,2,0,"mat-error",32),t.DNE(71,ct,2,0,"mat-error",32),t.k0s(),t.j41(72,"mat-form-field",33)(73,"mat-label"),t.EFF(74,"Select Country"),t.k0s(),t.nrm(75,"input",34),t.j41(76,"mat-autocomplete",null,38),t.DNE(78,pt,2,2,"mat-option",36),t.nI1(79,"async"),t.k0s()(),t.nrm(80,"mat-divider"),t.k0s(),t.j41(81,"div",25)(82,"h3"),t.EFF(83,"Map 3:"),t.k0s(),t.j41(84,"mat-form-field",26)(85,"mat-label"),t.EFF(86,"Enter a date range for map 3"),t.k0s(),t.j41(87,"mat-date-range-input",27),t.nrm(88,"input",28)(89,"input",29),t.k0s(),t.nrm(90,"mat-datepicker-toggle",30)(91,"mat-date-range-picker",null,39),t.DNE(93,gt,2,0,"mat-error",32),t.DNE(94,mt,2,0,"mat-error",32),t.k0s(),t.j41(95,"mat-form-field",33)(96,"mat-label"),t.EFF(97,"Select Country"),t.k0s(),t.nrm(98,"input",34),t.j41(99,"mat-autocomplete",null,40),t.DNE(101,dt,2,2,"mat-option",36),t.nI1(102,"async"),t.k0s()(),t.nrm(103,"mat-divider"),t.k0s(),t.j41(104,"div",25)(105,"h3"),t.EFF(106,"Map 4:"),t.k0s(),t.j41(107,"mat-form-field",26)(108,"mat-label"),t.EFF(109,"Enter a date range for map 4"),t.k0s(),t.j41(110,"mat-date-range-input",27),t.nrm(111,"input",28)(112,"input",29),t.k0s(),t.nrm(113,"mat-datepicker-toggle",30)(114,"mat-date-range-picker",null,41),t.DNE(116,ft,2,0,"mat-error",32),t.DNE(117,ut,2,0,"mat-error",32),t.k0s(),t.j41(118,"mat-form-field",33)(119,"mat-label"),t.EFF(120,"Select Country"),t.k0s(),t.nrm(121,"input",34),t.j41(122,"mat-autocomplete",null,42),t.DNE(124,yt,2,2,"mat-option",36),t.nI1(125,"async"),t.k0s()(),t.nrm(126,"mat-divider"),t.k0s(),t.j41(127,"div",43)(128,"mat-checkbox",44),t.bIt("ngModelChange",function(l){return n.faoChecked=l})("change",function(l){return n.faoChange(l)}),t.EFF(129,"Display FAO Fishing Boundaries"),t.k0s(),t.j41(130,"mat-form-field",26)(131,"mat-label"),t.EFF(132,"Select Scaling"),t.k0s(),t.j41(133,"mat-select",45),t.bIt("valueChange",function(l){return n.mapsScale=l}),t.j41(134,"mat-option",46),t.EFF(135,"Linear Scaling"),t.k0s(),t.j41(136,"mat-option",47),t.EFF(137,"Square Root Scaling"),t.k0s(),t.j41(138,"mat-option",48),t.EFF(139,"Logarithmic Scaling"),t.k0s()()(),t.j41(140,"button",49),t.bIt("click",function(){return n.clickUpdate()}),t.EFF(141," Update Visualization "),t.k0s()()()()()),2&i){const s=t.sdS(46),l=t.sdS(54),g=t.sdS(69),h=t.sdS(77),u=t.sdS(92),C=t.sdS(100),k=t.sdS(115),x=t.sdS(123);t.R7$(41),t.Y8G("formGroup",n.range1)("min",n.minDate)("max",n.maxDate)("rangePicker",s),t.R7$(3),t.Y8G("for",s),t.R7$(3),t.Y8G("ngIf",n.range1.controls.start.hasError("matStartDateInvalid")),t.R7$(1),t.Y8G("ngIf",n.range1.controls.end.hasError("matEndDateInvalid")),t.R7$(4),t.Y8G("formControl",n.countryControl1)("matAutocomplete",l),t.R7$(3),t.Y8G("ngForOf",t.bMT(56,43,n.filteredOptions1)),t.R7$(9),t.Y8G("formGroup",n.range2)("min",n.minDate)("max",n.maxDate)("rangePicker",g),t.R7$(3),t.Y8G("for",g),t.R7$(3),t.Y8G("ngIf",n.range1.controls.start.hasError("matStartDateInvalid")),t.R7$(1),t.Y8G("ngIf",n.range1.controls.end.hasError("matEndDateInvalid")),t.R7$(4),t.Y8G("formControl",n.countryControl2)("matAutocomplete",h),t.R7$(3),t.Y8G("ngForOf",t.bMT(79,45,n.filteredOptions2)),t.R7$(9),t.Y8G("formGroup",n.range3)("min",n.minDate)("max",n.maxDate)("rangePicker",u),t.R7$(3),t.Y8G("for",u),t.R7$(3),t.Y8G("ngIf",n.range1.controls.start.hasError("matStartDateInvalid")),t.R7$(1),t.Y8G("ngIf",n.range1.controls.end.hasError("matEndDateInvalid")),t.R7$(4),t.Y8G("formControl",n.countryControl3)("matAutocomplete",C),t.R7$(3),t.Y8G("ngForOf",t.bMT(102,47,n.filteredOptions3)),t.R7$(9),t.Y8G("formGroup",n.range4)("min",n.minDate)("max",n.maxDate)("rangePicker",k),t.R7$(3),t.Y8G("for",k),t.R7$(3),t.Y8G("ngIf",n.range1.controls.start.hasError("matStartDateInvalid")),t.R7$(1),t.Y8G("ngIf",n.range1.controls.end.hasError("matEndDateInvalid")),t.R7$(4),t.Y8G("formControl",n.countryControl4)("matAutocomplete",x),t.R7$(3),t.Y8G("ngForOf",t.bMT(125,49,n.filteredOptions4)),t.R7$(4),t.Y8G("ngModel",n.faoChecked)("disabled",n.faoDisabled),t.R7$(5),t.Y8G("value",n.mapsScale)}},dependencies:[G.Sq,G.bT,A.RN,D.rl,D.nJ,D.TL,D.yw,L.bU,L.el,L.xR,L.IG,L.SG,m.me,m.BC,m.cb,m.l_,m.j4,m.JD,$.$z,z.q,I.$3,B.wT,I.pN,N.fg,J.HM,X.VO,Z.So,m.vS,G.Jj],styles:[".filter[_ngcontent-%COMP%], .navigation-container[_ngcontent-%COMP%], .map-container-right[_ngcontent-%COMP%], .map-container-left[_ngcontent-%COMP%]{display:inline-block;width:24%;height:93vh}.map-container-bottom[_ngcontent-%COMP%], .map-container-top[_ngcontent-%COMP%]{display:flow-root;width:100%;height:49.4%}#map4[_ngcontent-%COMP%], #map3[_ngcontent-%COMP%], #map2[_ngcontent-%COMP%], #map1[_ngcontent-%COMP%]{height:98.5%}.container[_ngcontent-%COMP%]{background:#F4F4F4;width:99%;height:93.5vh;margin:.4%;display:flex;align-items:start;padding-top:.4%}.map-container-left[_ngcontent-%COMP%]{margin-left:.5%;margin-right:.3%}.map-container-right[_ngcontent-%COMP%], .navigation-container[_ngcontent-%COMP%]{margin-right:1%}.filter[_ngcontent-%COMP%]{height:93vh;margin-right:.5%}#navigation[_ngcontent-%COMP%]{height:91.4vh}mat-form-field[_ngcontent-%COMP%]{width:100%}#filter[_ngcontent-%COMP%]{width:93%;height:94.5%;display:flex;flex-direction:column;justify-content:space-between}#legendTitle[_ngcontent-%COMP%]{transform:rotate(90deg)}#legendCard[_ngcontent-%COMP%]{z-index:9999;position:absolute;top:75vh;right:35.7%;transform:rotate(-90deg)}#updateButton[_ngcontent-%COMP%]{width:100%}#compBorder[_ngcontent-%COMP%]{width:98%;height:50%;top:25%;right:.5%;position:absolute;border:3px solid #ffa800;pointer-events:none;z-index:999}p[_ngcontent-%COMP%]{position:absolute;color:#29335c;font-size:20px;z-index:999;margin-left:.2%;margin-top:.2%;font-family:Roboto;text-decoration:underline;text-decoration-color:#ffa800;background-color:#fffc;padding:.2em;border-radius:5px}.maps-container[_ngcontent-%COMP%]{width:100%;height:max-content;padding:.3em 0}.maps-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding-left:.5em}.progress[_ngcontent-%COMP%], .tooltip[_ngcontent-%COMP%]{visibility:hidden}h3[_ngcontent-%COMP%]{margin:0 0 4px}"]})}}return o})();var Ct=c(3881);let bt=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[G.MD,nt.iI.forChild([{path:"",component:vt}]),A.Hu,D.RG,B.WX,Ct.Ez,L.X6,m.X1,$.Hl,z.w,I.jL,N.fS,J.PO,X.Ve,Z.g7,m.YN]})}}return o})()}}]);